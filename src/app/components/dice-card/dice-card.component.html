<mat-card class="dice-card">
    <mat-card-header>
      <mat-card-title>Dice Tray</mat-card-title>
    </mat-card-header>
    <mat-card-content>
        <div class="dice-container">

            @if (currentRequest(); as pending) {
                <div class="pending-roll-info">
                   <p>{{ pending.label }}</p>
                   <p class="modifier">
                     Roll {{ pending.expression }}
                     @if (pending.modifier !== undefined) {
                       <span>(Modifier: {{ pending.modifier >= 0 ? '+' : '' }}{{ pending.modifier }})</span>
                     }
                   </p>
                </div>

                @if (rolling()) {
                    <div class="dice-animation">
                         <span class="d20-icon spinning">ðŸŽ²</span>
                         <p>Rolling...</p>
                    </div>
                } @else if (lastRoll()) {
                    <div class="dice-result">
                        <span class="d20-icon">{{ lastRoll() }}</span>
                    </div>
                } @else {
                     <button mat-fab extended color="accent" (click)="rollDice()">
                        <span class="d20-icon">ðŸŽ²</span> Roll
                     </button>
                }

            } @else {
                <div class="empty-tray">
                    <span class="d20-icon faded">ðŸŽ²</span>
                    <p>Waiting for request...</p>
                </div>
            }

        </div>
    </mat-card-content>
</mat-card>
